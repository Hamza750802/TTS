<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}Cheap TTS{% endblock %}</title>
  <style>
    :root {
      --bg1: #0f172a; /* slate-900 */
      --bg2: #111827; /* gray-900 */
      --accent1: #7c3aed; /* violet-600 */
      --accent2: #06b6d4; /* cyan-500 */
      --card: rgba(255,255,255,0.06);
      --text: #e5e7eb; /* gray-200 */
      --muted: #9ca3af; /* gray-400 */
      --danger: #ef4444;
      --success: #22c55e;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:#1f2937;
      background:#f9fafb;
      min-height:100vh;
    }
    .container{max-width:980px;margin:0 auto;padding:24px}
    .glass{
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,.08);
    }
    .nav{display:flex;align-items:center;justify-content:space-between;padding:18px 24px;margin-bottom:0;background:white;border-bottom:1px solid #e5e7eb;border-radius:0}
    .brand{display:flex;gap:12px;align-items:center;text-decoration:none;color:#1f2937;font-size:20px}
    .brand span{font-weight:800;background:linear-gradient(90deg,#3b82f6,#8b5cf6);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
    .nav-actions{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    a, .btn{color:#374151;text-decoration:none;font-size:14px}
    .btn{padding:10px 18px;border-radius:8px;border:1px solid #e5e7eb;background:white;transition:all .2s ease;font-weight:600}
    .btn:hover{background:#f9fafb;border-color:#d1d5db;transform:translateY(-1px)}
    .btn.primary{background:linear-gradient(90deg,#3b82f6,#8b5cf6);border:none;color:white;box-shadow:0 4px 12px rgba(59,130,246,.25)}
    .btn.primary:hover{box-shadow:0 6px 16px rgba(59,130,246,.35);transform:translateY(-2px)}
    .btn.danger{background:#fee;border-color:#fcc;color:#dc2626}
    .btn.success{background:#d1fae5;border-color:#6ee7b7;color:#047857}
    .status-badge{padding:8px 14px;border-radius:6px;background:#ecfdf5;color:#047857;font-size:13px;font-weight:600;border:1px solid #6ee7b7}
    .hero{padding:34px}
    .title{font-size:32px;font-weight:800;margin:4px 0}
    .subtitle{color:var(--muted);max-width:700px}
    .flash{margin:14px 18px}
    .alert{padding:12px 14px;border-radius:12px;border:1px solid #e5e7eb;margin-bottom:8px}
    .alert.error{background:#fee2e2;border-color:#fca5a5;color:#dc2626}
    .alert.success{background:#d1fae5;border-color:#6ee7b7;color:#047857}
    .card{padding:22px}
    .muted{color:#6b7280}
    .grid{display:grid;gap:18px}
    .center{text-align:center}
    form input, form button, form select, form textarea{font:inherit}
    input,select,textarea{width:100%;padding:12px 14px;border-radius:12px;border:2px solid #e5e7eb;background:white;color:#1f2937}
    input::placeholder,textarea::placeholder{color:#9ca3af}
    label{display:block;margin:8px 2px 6px 2px;color:#374151;font-weight:600}
    .announcement-banner{background:linear-gradient(90deg,#3b82f6,#8b5cf6);color:white;text-align:center;padding:16px 24px;font-weight:600;font-size:15px;box-shadow:0 2px 8px rgba(59,130,246,.2);line-height:1.6}
    .announcement-banner .emoji{font-size:18px;margin-right:8px}
    .announcement-banner .separator{margin:0 16px;opacity:0.5}
    .announcement-banner strong{font-weight:700;text-decoration:underline}
    @media (max-width:768px){.announcement-banner{font-size:14px;padding:12px 16px}.announcement-banner .separator{display:block;margin:8px 0;opacity:0}}
  </style>
  {% block head %}{% endblock %}
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <script>
      window.__FLASH__ = {{ messages|tojson }};
    </script>
    {% endif %}
  {% endwith %}
</head>
<body>
  <div class="announcement-banner">
    <span class="emoji">üé≠</span> <strong>NEW:</strong> Emotion control now live! 47 voices support cheerful, sad, angry & more.
    <span class="separator">‚Ä¢</span>
    <span class="emoji">‚úÖ</span> <strong>API fully operational</strong> - All issues resolved.
    <span class="separator">‚Ä¢</span>
    Look for üé≠ emoji in voice dropdowns!
  </div>
  
  <div class="container">
    <nav class="nav">
      <a href="{{ url_for('index') }}" class="brand">
        <span>üí¨ Cheap TTS</span>
      </a>
      <div class="nav-actions">
        {% if current_user.is_authenticated %}
          {% if current_user.is_subscribed %}
            <a class="btn" href="{{ url_for('api_keys_page') }}">üîë API Keys</a>
            <span class="status-badge">Active: $7.99/mo</span>
            {% if current_user.stripe_customer_id %}
              <a class="btn" href="{{ url_for('billing_portal') }}">Manage Billing</a>
            {% endif %}
          {% else %}
            <a class="btn primary" href="{{ url_for('subscribe') }}">Subscribe $7.99/mo</a>
          {% endif %}
          <a class="btn" href="mailto:support@cheaptts.com">‚úâÔ∏è Support</a>
          <a class="btn" href="{{ url_for('logout') }}">Logout</a>
        {% else %}
          <a class="btn" href="{{ url_for('login') }}">Sign in</a>
          <a class="btn primary" href="{{ url_for('signup') }}">Sign up</a>
        {% endif %}
      </div>
    </nav>

    <div class="flash">
      <div id="flash-root"></div>
    </div>

    <main class="glass card">
      {% block content %}{% endblock %}
    </main>
  </div>

  <script>
    (function(){
      if(!window.__FLASH__) return;
      const root = document.getElementById('flash-root');
      window.__FLASH__.forEach(([kind, msg])=>{
        const div = document.createElement('div');
        div.className = 'alert ' + (kind||'');
        div.textContent = msg;
        root.appendChild(div);
      });
    })();
  </script>
  {% block scripts %}{% endblock %}
</body>
</html>
