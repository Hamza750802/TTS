{% extends 'base.html' %}
{% block title %}Subscribe ‚Äî Cheap TTS{% endblock %}
{% block head %}
<script src="https://js.stripe.com/v3/"></script>
<style>
  .pricing-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 24px;
    max-width: 700px;
    margin: 32px auto;
  }
  .pricing-card {
    background: white;
    border: 2px solid #e5e7eb;
    border-radius: 16px;
    padding: 28px;
    text-align: center;
    transition: all 0.2s ease;
  }
  .pricing-card:hover {
    border-color: #8b5cf6;
    transform: translateY(-4px);
    box-shadow: 0 12px 24px rgba(0,0,0,0.1);
  }
  .pricing-card.featured {
    border-color: #10b981;
    background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
  }
  .pricing-card .badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 700;
    margin-bottom: 12px;
  }
  .pricing-card .price {
    font-size: 48px;
    font-weight: 800;
    color: #1f2937;
    margin: 16px 0;
  }
  .pricing-card .price small {
    font-size: 18px;
    color: #6b7280;
    font-weight: 500;
  }
  .pricing-card ul {
    list-style: none;
    padding: 0;
    margin: 20px 0;
    text-align: left;
  }
  .pricing-card ul li {
    padding: 8px 0;
    color: #374151;
    font-size: 14px;
  }
  .pricing-card ul li:before {
    content: "‚úì ";
    color: #10b981;
    font-weight: bold;
  }
  .api-note {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: 8px;
    padding: 12px 16px;
    margin-top: 24px;
    font-size: 13px;
    color: #92400e;
  }
</style>
{% endblock %}
{% block content %}
  <div style="text-align:center; max-width: 800px; margin: 0 auto;">
    <h2 style="margin-top:0; font-size: 32px;">Unlock Unlimited Text‚Äëto‚ÄëSpeech</h2>
    <p class="muted" style="font-size: 16px;">Choose the plan that works best for you. Use the TTS tool on our website with no character limits.</p>
    
    <div class="pricing-cards">
      <!-- Monthly Plan -->
      <div class="pricing-card">
        <div class="badge" style="background: #dbeafe; color: #1d4ed8;">MONTHLY</div>
        <div class="price">$7.99<small>/mo</small></div>
        <p style="color: #6b7280; margin-bottom: 16px;">Cancel anytime</p>
        <ul>
          <li>Unlimited TTS generation</li>
          <li>550+ natural voices</li>
          <li>153 languages</li>
          <li>Multi-speaker dialogue</li>
          <li>Emotion control</li>
          <li>Commercial use</li>
        </ul>
        <button id="subscribeBtn" class="btn primary" style="width: 100%;">Subscribe Monthly</button>
      </div>
      
      <!-- Lifetime Plan -->
      <div class="pricing-card featured">
        <div class="badge" style="background: #10b981; color: white;">‚≠ê BEST VALUE</div>
        <div class="price">$99<small> one-time</small></div>
        <p style="color: #047857; font-weight: 600; margin-bottom: 16px;">Lifetime Access</p>
        <ul>
          <li>Everything in Monthly</li>
          <li>Pay once, use forever</li>
          <li>No recurring charges</li>
          <li>All future updates included</li>
          <li>Priority support</li>
          <li>Early access to new features</li>
        </ul>
        <button id="lifetimeBtn" class="btn" style="width: 100%; background: linear-gradient(90deg, #10b981, #059669); color: white; border: none;">Get Lifetime Access</button>
      </div>
    </div>
    
    <div class="api-note">
      <strong>üìå Note:</strong> These plans are for using TTS on this website only. 
      Need API access for your own app? <a href="{{ url_for('api_pricing') }}" style="color: #1d4ed8; font-weight: 600;">View API Plans ‚Üí</a>
    </div>
    
    <p style="margin-top: 24px;">
      <a class="btn" href="{{ url_for('index') }}">‚Üê Back to Dashboard</a>
    </p>
  </div>
{% endblock %}
{% block scripts %}
<script>
  document.getElementById('subscribeBtn').addEventListener('click', async () => {
    try {
      const res = await fetch('/create-checkout-session', {method:'POST'});
      const data = await res.json();
      if(data.url){
        window.location.href = data.url;
      } else {
        alert(data.error || 'Stripe is not configured');
      }
    } catch (e) {
      alert('Failed to start checkout');
    }
  });
  
  document.getElementById('lifetimeBtn').addEventListener('click', async () => {
    try {
      const res = await fetch('/create-checkout-session?plan=lifetime', {method:'POST'});
      const data = await res.json();
      if(data.url){
        window.location.href = data.url;
      } else {
        alert(data.error || 'Stripe is not configured');
      }
    } catch (e) {
      alert('Failed to start checkout');
    }
  });
</script>
{% endblock %}

